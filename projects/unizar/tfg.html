<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFG Ingenier√≠a Inform√°tica</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/project-styles.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <span class="bracket">&lt;</span>
                <span class="logo-text">TFG</span>
                <span class="bracket">/&gt;</span>
            </div>
            <ul class="nav-links">
                <li><a href="../../index.html" class="nav-link">‚Üê Volver al Portfolio</a></li>
            </ul>
            <button class="theme-toggle" id="themeToggle" aria-label="Cambiar tema">
                <span class="icon">‚òÄ</span>
            </button>
        </nav>
    </header>

    <section class="project-hero">
        <div class="project-header">
            <a href="../../index.html#proyectos" class="back-link">‚Üê Volver a Proyectos</a>

            <h1 class="project-title">Simulaci√≥n de hardware de captura ultrarr√°pida de fotones en transporte de luz</h1>
            
            <div class="project-meta">
                <div class="meta-item">üìÖ Agosto 2024</div>
                <div class="meta-item">‚è±Ô∏è Duraci√≥n: 10 meses</div>
                <div class="meta-item">üë§ Trabajo de Final de Grado</div>
            </div>

            <div class="project-links">
                <a href="https://github.com/J-solan/mitransient_SPAD" class="btn btn-primary">
                    <span>üìÇ</span> Ver en GitHub
                </a>
                <a href="https://zaguan.unizar.es/record/149395/files/TAZ-TFG-2024-4202.pdf" class="btn btn-secondary">
                    <span>üìÑ</span> Informe completo (PDF)
                </a>
            </div>

            <div class="tech-list">
                <span class="tech-item">Python 3.11</span>
                <span class="tech-item">Mitsuba 3</span>
                <span class="tech-item">DR.Jit</span>
                <span class="tech-item">NumPy</span>
            </div>
        </div>
    </section>

    <div class="project-content">
        <!-- Resumen -->
        <section class="content-section">
            <h2>üìù Resumen Ejecutivo</h2>
            <p>
                Este trabajo presenta una simulaci√≥n del comportamiento de sensores SPAD (Single-Photon Avalanche Diodes)
                utilizados en sistemas de captura ultrarr√°pida de luz. A trav√©s del motor f√≠sico <strong>Mitsuba 3</strong>,
                se modela la detecci√≥n temporal de fotones, permitiendo recrear c√≥mo la luz se propaga y refleja en
                entornos complejos con resoluci√≥n de picosegundos.
            </p>
            <p>
                El proyecto contribuye al estudio de la <strong>imagen no lineal de visi√≥n directa (NLOS)</strong> y de t√©cnicas
                de reconstrucci√≥n 3D basadas en el tiempo de vuelo (ToF), aportando una herramienta de simulaci√≥n
                flexible y reproducible para la comunidad cient√≠fica.
            </p>
        </section>

        <!-- GIFs -->
        <section class="content-section">
            <img src="/assets/images/tfm/cornell-box.gif" alt="Simulaci√≥n Cornell Box con detecci√≥n LOS">
            <img src="/assets/images/tfm/nlos-Z.gif" alt="Simulaci√≥n NLOS con geometr√≠a Z">
        </section>

        <!-- Contexto y Motivaci√≥n -->
        <section class="content-section">
            <h2>üéØ Contexto y Motivaci√≥n</h2>
            <p>
                La captura ultrarr√°pida de luz ha abierto nuevas posibilidades en <strong>visi√≥n computacional</strong>,
                permitiendo observar la propagaci√≥n de fotones a trav√©s de medios opacos o fuera de l√≠nea de visi√≥n.
                Los sensores SPAD son capaces de registrar eventos individuales de fotones con alt√≠sima precisi√≥n temporal,
                pero su estudio experimental es costoso y limitado.
            </p>
            <p>
                Este trabajo busca <strong>replicar mediante simulaci√≥n</strong> el funcionamiento f√≠sico de estos sensores,
                validando su respuesta frente a configuraciones geom√©tricas diversas y materiales con distintas propiedades √≥pticas.
            </p>
        </section>

        <!-- Metodolog√≠a -->
        <section class="content-section">
            <h2>üî¨ Metodolog√≠a</h2>
            <p>
                El desarrollo del trabajo se centr√≥ en la creaci√≥n de un entorno de simulaci√≥n que reprodujera el comportamiento f√≠sico de los sensores
                <strong>Single-Photon Avalanche Diode (SPAD)</strong> utilizados en captura ultrarr√°pida de luz. La metodolog√≠a combin√≥ el uso de 
                <strong>Mitsuba 3</strong> ‚Äîun motor de renderizado f√≠sicamente basado‚Äî con la extensi√≥n de su arquitectura mediante el lenguaje 
                <strong>DR.Jit</strong>, permitiendo modelar tanto la √≥ptica de transporte de luz como el proceso estad√≠stico de detecci√≥n de fotones individuales.
            </p>

            <h3>1Ô∏è‚É£ An√°lisis del sistema f√≠sico y modelado matem√°tico</h3>
            <p>
                Se comenz√≥ con un estudio detallado del funcionamiento de los sensores SPAD: su mecanismo de avalancha, el tiempo muerto tras cada detecci√≥n,
                las limitaciones debidas al <em>dark-count rate</em> y el comportamiento estad√≠stico asociado al proceso de conteo de fotones.
                Con base en la literatura existente sobre <strong>time-resolved imaging</strong> y <strong>femto-photography</strong>,
                se formul√≥ un modelo de detecci√≥n probabil√≠stico capaz de reproducir la respuesta temporal del sensor a est√≠mulos de luz ultrarr√°pidos.
            </p>

            <p>
                Este modelo se represent√≥ mediante funciones de distribuci√≥n temporal (<em>temporal point spread functions</em>), 
                que describen c√≥mo un pulso ideal de luz se dispersa en el tiempo debido a interacciones con materiales y geometr√≠as.
                Se incorpor√≥ tambi√©n un modelo de ruido dependiente de la temperatura y del flujo de fotones incidente,
                siguiendo las curvas t√≠picas de respuesta de los dispositivos SPAD comerciales.
            </p>

            <h3>2Ô∏è‚É£ Implementaci√≥n en Mitsuba 3 y DR.Jit</h3>
            <p>
                El n√∫cleo del trabajo consisti√≥ en extender el motor de renderizado <strong>Mitsuba 3</strong> ‚Äîescrito en C++ y Python‚Äî 
                para incorporar un nuevo <em>integrador</em> denominado <code>transient_spad</code>. 
                Este integrador simula el transporte de luz a nivel de fot√≥n, midiendo los tiempos de llegada a un sensor virtual
                y construyendo histogramas de detecci√≥n temporal con resoluci√≥n configurable (en el orden de los picosegundos).
            </p>

            <p>
                Se utilizaron las capacidades de diferenciaci√≥n autom√°tica de <strong>DR.Jit</strong> para optimizar c√°lculos de trayectorias de rayos
                y gestionar grandes vol√∫menes de muestras Monte Carlo. El c√≥digo se integr√≥ dentro del ecosistema de Mitsuba 3,
                respetando su estructura modular y aprovechando sus representaciones espectrales de materiales y emisores de luz.
            </p>

            <h3>3Ô∏è‚É£ Escenarios experimentales: LOS y NLOS</h3>
            <p>
                Para evaluar el comportamiento del simulador, se dise√±aron dos tipos de escenas:
                <strong>Line of Sight (LOS)</strong>, donde la c√°mara observa directamente el objeto iluminado,
                y <strong>Non-Line of Sight (NLOS)</strong>, donde la luz se refleja en una superficie intermedia
                antes de alcanzar el objeto oculto. 
                Las escenas se modelaron con geometr√≠as simples (como una "Cornell Box") y materiales difusos e ideales
                para aislar efectos de reflexi√≥n y dispersi√≥n.
            </p>

            <p>
                En cada simulaci√≥n se generaron millones de trayectorias de fotones, recopilando histogramas temporales
                que luego se analizaron para obtener informaci√≥n de profundidad y reconstrucci√≥n geom√©trica b√°sica.
                Se compararon los resultados con simulaciones de referencia y estudios previos de Jarabo, Velten y colaboradores.
            </p>

            <h3>4Ô∏è‚É£ Validaci√≥n y an√°lisis de resultados</h3>
            <p>
                Los resultados mostraron una buena correspondencia entre los histogramas simulados y los obtenidos experimentalmente
                en la literatura. En configuraciones LOS, la curva de detecci√≥n presenta un pico bien definido
                correspondiente al tiempo directo de vuelo. En NLOS, la respuesta se aten√∫a y se dispersa, 
                reproduciendo con fidelidad la naturaleza difusa del transporte de luz indirecta.
            </p>
            <p>
                Se realiz√≥ adem√°s un estudio de rendimiento y escalabilidad del integrador, demostrando que el uso de DR.Jit
                permite mantener tiempos de simulaci√≥n razonables incluso con resoluciones temporales muy altas.
            </p>

            <div class="info-box">
                <h4>üí° Resultado Destacado</h4>
                <p>
                    La herramienta desarrollada reproduce el comportamiento temporal de la luz en entornos complejos,
                    habilitando la experimentaci√≥n virtual con sensores SPAD sin recurrir a hardware f√≠sico.
                    Esto la convierte en una base s√≥lida para futuros trabajos en reconstrucci√≥n NLOS, calibraci√≥n de sensores
                    y dise√±o de nuevos algoritmos de visi√≥n ultrarr√°pida.
                </p>
            </div>
        </section>

        <!-- Papers relacionados -->
        <section class="content-section">
            <h2>üìö Papers Relacionados</h2>
            <ul style="color: var(--text-secondary); line-height: 2; margin-left: 2rem;">
                <li>Velten, A. et al. <em>Femto-photography: capturing and visualizing the propagation of light.</em> ACM TOG, 2013.</li>
                <li>Wu, R., Jarabo, A., Suo, J. et al. <em>Adaptive polarization-difference transient imaging for depth estimation in scattering media.</em> Opt. Lett., 2018.</li>
                <li>Velten, A. et al. <em>Recovering 3D shape around a corner using ultrafast time-of-flight imaging.</em> Nature Communications, 2012.</li>
            </ul>
        </section>

        <!-- CTA -->
        <section class="content-section" style="text-align: center; padding: 3rem 0;">
            <h2 style="border: none;">¬øInteresado en este proyecto?</h2>
            <p>Si quieres discutir sobre el trabajo, colaborar o compartir ideas, no dudes en contactarme.</p>
            <div class="project-links" style="justify-content: center;">
                <a href="../../index.html#proyectos" class="btn btn-secondary">‚Üê Ver m√°s proyectos</a>
            </div>
        </section>
    </div>

    <footer id="contacto">
        <div class="footer-content">
            <div class="footer-section">
                <h3 class="footer-title">Conecta conmigo</h3>
            </div>
            
            <div class="footer-links">
                <a href="https://github.com/J-solan" target="_blank" class="footer-link">
                    <span class="link-icon">‚Üí</span> GitHub
                </a>
                <a href="https://www.linkedin.com/in/jorge-solan/" target="_blank" class="footer-link">
                    <span class="link-icon">‚Üí</span> LinkedIn
                </a>
                <a href="mailto:jorgesolanmorote@gmail.com" class="footer-link">
                    <span class="link-icon">‚Üí</span> Email
                </a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p class="copyright">
                <br>
                ¬© 2025 | Jorge Sol√°n Portfolio
            </p>
        </div>
    </footer>

    <script src="../../js/main.js"></script>
    <script src="../../js/components.js"></script>
</body>
</html>